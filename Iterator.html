<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.30.0">


<link href="css/style.css" rel="stylesheet" type="text/css">

<script type="text/javascript" src="js/doc.js"></script>
<script type="text/javascript">
  CrystalDoc.base_path = "";
</script>

  <meta id="repository-name" content="github.com/aca-labs/numcry">
  <title>Iterator(T) - github.com/aca-labs/numcry</title>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="repository-links">
      <a href="index.html">README</a>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class=" " data-id="github.com/aca-labs/numcry/Enumerable" data-name="enumerable(t)">
      <a href="Enumerable.html">Enumerable</a>
      
    </li>
  
  <li class=" current" data-id="github.com/aca-labs/numcry/Iterator" data-name="iterator(t)">
      <a href="Iterator.html">Iterator</a>
      
    </li>
  
  <li class="parent " data-id="github.com/aca-labs/numcry/Numcry" data-name="numcry">
      <a href="Numcry.html">Numcry</a>
      
        <ul>
  
  <li class="parent " data-id="github.com/aca-labs/numcry/Numcry/Accumulate" data-name="numcry::accumulate">
      <a href="Numcry/Accumulate.html">Accumulate</a>
      
        <ul>
  
  <li class=" " data-id="github.com/aca-labs/numcry/Numcry/Accumulate/Ext" data-name="numcry::accumulate::ext(t)">
      <a href="Numcry/Accumulate/Ext.html">Ext</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="github.com/aca-labs/numcry/Numcry/Correlate" data-name="numcry::correlate">
      <a href="Numcry/Correlate.html">Correlate</a>
      
    </li>
  
  <li class=" " data-id="github.com/aca-labs/numcry/Numcry/Stats" data-name="numcry::stats">
      <a href="Numcry/Stats.html">Stats</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">module</span> Iterator(T)

</h1>





  <h2>Overview</h2>

  <p>An <code><a href="Iterator.html">Iterator</a></code> allows processing sequences lazily, as opposed to <code><a href="Enumerable.html">Enumerable</a></code> which processes
sequences eagerly and produces an <code>Array</code> in most of its methods.</p>

<p>As an example, let's compute the first three numbers in the range <code>1..10_000_000</code> that are even,
multiplied by three. One way to do this is:</p>

<pre><code>(<span class="n">1</span>..<span class="n">10_000_000</span>).<span class="k">select</span>(<span class="o">&amp;</span>.even?).map { <span class="o">|</span>x<span class="o">|</span> x <span class="o">*</span> <span class="n">3</span> }.first(<span class="n">3</span>) <span class="c"># =&gt; [6, 12, 18]</span></code></pre>

<p>The above works, but creates many intermediate arrays: one for the <em>select</em> call,
one for the <em>map</em> call and one for the <em>take</em> call. A more efficient way is to invoke
<code>Range#each</code> without a block, which gives us an <code><a href="Iterator.html">Iterator</a></code> so we can process the operations
lazily:</p>

<pre><code>(<span class="n">1</span>..<span class="n">10_000_000</span>).each.<span class="k">select</span>(<span class="o">&amp;</span>.even?).map { <span class="o">|</span>x<span class="o">|</span> x <span class="o">*</span> <span class="n">3</span> }.first(<span class="n">3</span>) <span class="c"># =&gt; #&lt; Iterator(T)::First...</span></code></pre>

<p><code><a href="Iterator.html">Iterator</a></code> redefines many of <code><a href="Enumerable.html">Enumerable</a></code>'s method in a lazy way, returning iterators
instead of arrays.</p>

<p>At the end of the call chain we get back a new iterator: we need to consume it, either
using <code>each</code> or <code>Enumerable#to_a</code>:</p>

<pre><code>(<span class="n">1</span>..<span class="n">10_000_000</span>).each.<span class="k">select</span>(<span class="o">&amp;</span>.even?).map { <span class="o">|</span>x<span class="o">|</span> x <span class="o">*</span> <span class="n">3</span> }.first(<span class="n">3</span>).to_a <span class="c"># =&gt; [6, 12, 18]</span></code></pre>

<p>To implement an <code><a href="Iterator.html">Iterator</a></code> you need to define a <code>next</code> method that must return the next
element in the sequence or <code>Iterator::Stop::INSTANCE</code>, which signals the end of the sequence
(you can invoke <code>stop</code> inside an iterator as a shortcut).</p>

<p>For example, this is an iterator that returns a sequence of <code>N</code> zeros:</p>

<pre><code><span class="k">class</span> <span class="t">Zeros</span>
  <span class="k">include</span> <span class="t">Iterator</span>(<span class="t">Int32</span>)

  <span class="k">def</span> <span class="m">initialize</span>(@size : <span class="t">Int32</span>)
    @produced <span class="o">=</span> <span class="n">0</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="m">next</span>
    <span class="k">if</span> @produced <span class="o">&lt;</span> @size
      @produced += <span class="n">1</span>
      <span class="n">0</span>
    <span class="k">else</span>
      stop
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>

zeros <span class="o">=</span> <span class="t">Zeros</span>.<span class="k">new</span>(<span class="n">5</span>)
zeros.to_a <span class="c"># =&gt; [0, 0, 0, 0, 0]</span></code></pre>

<p>The standard library provides iterators for many classes, like <code>Array</code>, <code>Hash</code>, <code>Range</code>, <code>String</code> and <code>IO</code>.
Usually to get an iterator you invoke a method that would usually yield elements to a block,
but without passing a block: <code>Array#each</code>, <code>Array#each_index</code>, <code>Hash#each</code>, <code>String#each_char</code>,
<code>IO#each_line</code>, etc.</p>





  <h2>Included Modules</h2>
  <ul class="other-types-list">
  
    <li class="other-type"><a href="Enumerable.html">Enumerable(T)</a></li>
  
    <li class="other-type"><a href="Numcry/Accumulate/Ext.html">Numcry::Accumulate::Ext(T)</a></li>
  
  </ul>










  <h2>Defined in:</h2>
  
    
      <a href="https://github.com/aca-labs/numcry/blob/338758a71f7b15a726a063d8ce1bf443719cbe3c/src/numcry/accumulate.cr#L69" target="_blank">
        numcry/accumulate.cr
      </a>
    
    <br/>
  













<div class="methods-inherited">
  
    

  <h3>Instance methods inherited from module <code><a href="Numcry/Accumulate/Ext.html">Numcry::Accumulate::Ext(T)</a></code></h3>
  
  
    <a href="Numcry/Accumulate/Ext.html#accumulate(initial:U,&block:U,T-%3EU)forallU-instance-method" class="tooltip">
      <span>accumulate(initial : U, &block : U, T -> U) forall U</span>
    accumulate</a>, 
    
  
    <a href="Numcry/Accumulate/Ext.html#cumprod-instance-method" class="tooltip">
      <span>cumprod</span>
    cumprod</a>, 
    
  
    <a href="Numcry/Accumulate/Ext.html#cumsum-instance-method" class="tooltip">
      <span>cumsum</span>
    cumsum</a>
    
  


    


    


  
    

  <h3>Instance methods inherited from module <code><a href="Enumerable.html">Enumerable(T)</a></code></h3>
  
  
    <a href="Enumerable.html#corrcoef(other:Enumerable,ddof=0.0)-instance-method" class="tooltip">
      <span>corrcoef(other : Enumerable, ddof = <span class="n">0.0</span>)</span>
    corrcoef</a>, 
    
  
    <a href="Enumerable.html#cov(other:Enumerable,ddof=0.0)-instance-method" class="tooltip">
      <span>cov(other : Enumerable, ddof = <span class="n">0.0</span>)</span>
    cov</a>, 
    
  
    <a href="Enumerable.html#mean-instance-method" class="tooltip">
      <span>mean</span>
    mean</a>, 
    
  
    <a href="Enumerable.html#std(ddof=0.0)-instance-method" class="tooltip">
      <span>std(ddof = <span class="n">0.0</span>)</span>
    std</a>, 
    
  
    <a href="Enumerable.html#var(ddof=0.0)-instance-method" class="tooltip">
      <span>var(ddof = <span class="n">0.0</span>)</span>
    var</a>
    
  


    


    


  
    

  <h3>Instance methods inherited from module <code><a href="Numcry/Accumulate/Ext.html">Numcry::Accumulate::Ext(T)</a></code></h3>
  
  
    <a href="Numcry/Accumulate/Ext.html#accumulate(initial:U,&block:U,T-%3EU)forallU-instance-method" class="tooltip">
      <span>accumulate(initial : U, &block : U, T -> U) forall U</span>
    accumulate</a>, 
    
  
    <a href="Numcry/Accumulate/Ext.html#cumprod-instance-method" class="tooltip">
      <span>cumprod</span>
    cumprod</a>, 
    
  
    <a href="Numcry/Accumulate/Ext.html#cumsum-instance-method" class="tooltip">
      <span>cumsum</span>
    cumsum</a>
    
  


    


    


  
</div>









</div>

</body>
</html>
